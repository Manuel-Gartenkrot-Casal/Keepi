@using Keepi.Models;
@{
    var lista = ViewBag.Notificaciones as List<Notificacion>;
}

<style>
.notificaciones-panel {
    position: fixed;
    top: 0;
    right: -24%;
    width: 24%;
    height: 100%;
    background-color: #fff;
    box-shadow: -0.8vw 0 2vw rgba(0,0,0,0.2);
    transition: right 0.4s ease;
    padding: 2%;
    z-index: 1001;
    overflow-y: auto;
    border-top-left-radius: 2%;
    border-bottom-left-radius: 2%;
}

.notificaciones-panel.abierto {
    right: 0;
}

.cerrar-sidebar {
    position: absolute;
    top: 1%;
    left: 1%;
    background: transparent;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
}

.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.3);
    z-index: 1000;
    display: none;
}

.overlay.active {
    display: block;
}

.main-content {
    transition: filter 0.4s ease;
}

.main-content.atenuado {
    filter: brightness(0.8);
}
</style>

<div class="notificaciones-panel" id="panel">

    <button class="cerrar-sidebar" onclick="toggleSidebar()">âœ–</button>

    <h3>Notificaciones</h3>

    <ul>
        @if (lista != null && lista.Any())
        {
            foreach (Notificacion n in lista)
            {
                <li class="notificacion-item">
                    <p>@n.Mensaje</p>
                    <small>@n.FechaNotificacion.ToString("dd/MM/yyyy HH:mm")</small>
                </li>
            }
        }
        else
        {
            <li class="sin-notificaciones">No hay notificaciones</li>
        }
    </ul>
</div>

<div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

<script>
function toggleSidebar() {
    const sidebar = document.getElementById('panel');
    const overlay = document.getElementById('overlay');
    const contenido = document.getElementById('contenido');

    sidebar.classList.toggle('abierto');
    overlay.classList.toggle('active');
    contenido.classList.toggle('shifted');
}
</script>
