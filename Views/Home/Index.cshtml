@{
    ViewData["Title"] = "Keepi";
}

<div class="index">
    <div class = "indexFondo">
    </div>
    <section>
        <h1>-"Don't waste it, <span class="Slogan">Keepi</span>t"</h1>
        <p>Organiz√° tu heladera, recib√≠ alertas de vencimiento y encontr√° las mejores recetas.</p>
        
        <div>
        @if (Context.Session.GetString("usuario") != null)
        {
            <a href="@Url.Action("ChatBot", "Chat")" class="cta">Habl√° con Mr. Keep</a>
            <a href="@Url.Action("InicializarHeladera", "Heladera")">Probar</a>
        }
        else
        {
            <a href="@Url.Action("Login", "Auth")" class="cta">Habl√° con Mr. Keep</a>
            <a href="@Url.Action("Login", "Auth")">Probar</a>
        }
        </div>
        <img src = "/imagenes/heladera.png" alt="heladera"/>
    </section>
<section class="section-problem">
        <h2>La problem√°tica</h2>
        <p class="section-desc">El desperdicio de alimentos es un desaf√≠o global con impacto directo en tu bolsillo y el planeta.</p>
        
        <div class="cards-container problem-cards">
            <div class="info-card">
                <div class="icon">üóëÔ∏è</div>
                <h3>1/3</h3>
                <p><strong>De los alimentos</strong> producidos en el mundo terminan en la basura. ¬°Es comida que podr√≠a consumirse!</p>
            </div>
            <div class="info-card">
                <div class="icon">üåç</div>
                <h3>800M+</h3>
                <p><strong>De personas</strong> padecen hambre, mientras toneladas de comida en buen estado se desechan a diario.</p>
            </div>
            <div class="info-card">
                <div class="icon">üíß</div>
                <h3>30%</h3>
                <p><strong>De recursos vitales</strong> como agua y tierra se usan para cultivar alimentos que nunca ser√°n comidos.</p>
            </div>
        </div>
    </section>

    <section class="section-solution">
        <h2>Nuestra soluci√≥n</h2>
        <p class="section-desc">Keepi transforma tu cocina con tecnolog√≠a simple para que ahorres dinero y vivas de forma sustentable.</p>

        <div id="solution-carousel" class="carousel">
            <div class="carousel-viewport">
                <div class="carousel-track">
                    <div class="carousel-slide">
                        <img src="/imagenes/Paso1Carrusel.jpg" alt="Paso 1">
                    </div>
                    <div class="carousel-slide">
                        <img src="/imagenes/Paso2Carrusel.jpg" alt="Paso 2">
                    </div>
                    <div class="carousel-slide">
                        <img src="/imagenes/Paso3Carrusel.jpg" alt="Paso 3">
                    </div>
                    <div class="carousel-slide">
                        <img src="/imagenes/Paso4Carrusel.jpg" alt="Paso 4">
                    </div>
                </div>
            </div>
            <button class="carousel-btn prev" aria-label="Anterior">‚Äπ</button>
            <button class="carousel-btn next" aria-label="Siguiente">‚Ä∫</button>
        </div>
    </section>

@section Scripts {
    <script>
        (function(){
            const root = document.getElementById('solution-carousel');
            if(!root) return;
            const track = root.querySelector('.carousel-track');
            const slides = root.querySelectorAll('.carousel-slide');
            const prev = root.querySelector('.prev');
            const next = root.querySelector('.next');
            const viewport = root.querySelector('.carousel-viewport');
            let index = 0;
            function go(i){
                index = (i + slides.length) % slides.length;
                const slideWidth = viewport.clientWidth;
                track.style.transform = 'translateX(' + (-index * slideWidth) + 'px)';
            }
            prev.addEventListener('click', function(){ go(index - 1); });
            next.addEventListener('click', function(){ go(index + 1); });
            window.addEventListener('resize', function(){ go(index); });
            let startX = 0, dx = 0, dragging = false;
            function start(e){ dragging = true; startX = (e.touches? e.touches[0].clientX : e.clientX); }
            function move(e){ if(!dragging) return; const x = (e.touches? e.touches[0].clientX : e.clientX); dx = x - startX; }
            function end(){ if(!dragging) return; if(dx < -50) go(index + 1); else if(dx > 50) go(index - 1); dragging = false; dx = 0; }
            viewport.addEventListener('mousedown', start);
            window.addEventListener('mousemove', move);
            window.addEventListener('mouseup', end);
            viewport.addEventListener('touchstart', start, {passive:true});
            viewport.addEventListener('touchmove', move, {passive:true});
            viewport.addEventListener('touchend', end);
            go(index);
        })();
    </script>
}
